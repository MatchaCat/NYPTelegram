/*************************************
* DEPENDENCIES
*************************************/

var should = require('chai').should();
var steganographie = require('../index');
var path = require('path');
var fs = require('fs');

/*************************************
* BOTH
*************************************/

describe('conceal and reveal', function() {
  describe('Method simple', function() {
    it('message correctly concealed and revealed', function() {
      let message = 'test message';
      // Conceal
      steganographie.conceal({
        input: path.resolve(__dirname, 'img_test.png'),
        output: path.resolve(__dirname, 'img_computed.png'),
        method: 'simple',
        text: message
      }, (err, res) => {
        // Reveal
        steganographie.reveal({
          input: path.resolve(__dirname, 'img_computed.png'),
          method: 'simple'
        }, (err, res) => {
          fs.unlinkSync(path.resolve(__dirname, 'img_computed.png'));
          res.should.equal(message);
        });
      });
    });
  });
});
